<% if user_signed_in? %>

  <h1>My Records</h1>

  <table class="table table-hover table-bordered table-striped">
    <thead class="table-success">
      <tr>
        <th><%= link_to "Date", :sort => "date"%></th>
        <!-- <th>Rec id</th> -->
        <th>Activity</th>
        <th><%= link_to "Time Invested", :sort => "minutes DESC, date"%></th>
        <th>Notes</th>
        <th><%= link_to "Shared?", :sort => "share DESC, date"%></th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @records.each do |record| %>
        <% if record.user == current_user %>
          <tr>
            <td><%= record.date %></td>
            <!-- <td><%= record.id %></td> -->
            <td><%= record.activity.name %></td>
            <td><%= record.minutes %>&nbsp;minutes</td>
            <td><%= record.notes %></td>
            <td>
              <% if record.share %>
                &#9989;
              <% else %>
                &#10062;
              <% end %>
            </td>
            <td><%= link_to 'Show', record %></td>

            <td><%= link_to 'Edit', edit_record_path(record) %></td>
            <td><%= link_to 'Destroy', record, method: :delete, data: { confirm: 'Are you sure?' } %></td>

          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>

  <br>
  <%= link_to 'New Record', new_record_path, class:"btn btn-success" %>
  <br><br><br><br>

  <h3>Others' Records</h3>
  <p>These are records created and shared by other users, feel free to take inspiration from them!</p>

  <table class="table table-hover table-bordered table-striped">
    <thead class="table-info">
      <tr>
        <th>Date</th>
        <!-- <th>Rec id</th> -->
        <th>Activity</th>
        <th>Time Invested</th>
        <th>Notes</th>
        <th>Shared by</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @records.each do |record| %>
        <% if record.user != current_user && record.share %>
          <tr>
            <td><%= record.date %></td>
            <!-- <td><%= record.id %></td> -->
            <td><%= record.activity.name %></td>
            <td><%= record.minutes %>&nbsp;minutes</td>
            <td><%= record.notes %></td>
            <td><%= record.user.email %></td>
            <td><%= link_to 'Show', record %></td>

            <td><%= link_to 'Edit', edit_record_path(record) %></td>
            <td><%= link_to 'Destroy', record, method: :delete, data: { confirm: 'Are you sure?' } %></td>

          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
  <br>
<% else %>
  
  <%= render 'home/welcome' %>

<% end %>